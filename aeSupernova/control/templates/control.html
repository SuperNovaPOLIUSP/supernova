{% extends 'base_supernova.html' %}

{% load static %}

{% block title %}<title>Supernova - Control</title>{% endblock %}

{% block content %}
<div id="center-box">
	<h2 id="h2-spacing"> Controle de Datafiles </h2>

<span>Ordenamento: </span><br><br><br>
<select id = 'urls' style = 'left:400px'>
    <option value = 'year/session/faculty/cycle/term/opticalSheet/datafile/'>year/session/faculty/cycle/term/opticalSheet/datafile/</option>
    <option value = 'first/second'>first/second</option>
</select>
{% autoescape off %}
    {{ header }}
{% endautoescape %}
<button style ='top:150px; left:50px;'  onMouseDown = 'findData()' class="oval-button"> Achar! </button><br><br>
<div id = 'nodes' style = 'top:200px; left:30px; display: block;'></div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    {% include "ControlNode.js" %} 
</script>
<script type="text/javascript">
    headerFacultyInit()
    headerTermInit()
    $('#headerFaculties').attr('style', '')
    $('#headerFaculties').prepend('<span>Faculdades: </span>')
    $('#headerCycles').attr('style','')
    $('#headerCycles').hide()
    $('#headerTerms').attr('style','')
    function findData(){
        idTimePeriod = $('#headerTimePeriod').val()
        idFaculty = $('#headerFaculty').val()
        idCycle = $('#headerCycle').val()
        term = $('#headerTerm').val()
        get = new XMLHttpRequest()
        get.open( "GET", 'findData/?' + $.param({idTimePeriod: idTimePeriod, idFaculty: idFaculty, idCycle:idCycle, term:term}), false)
        get.send(null)
        var datas = JSON.parse(get.responseText)
        node = new ControlNode($('#urls').val(), datas, 0, 'base')
        $('#nodes').html('')
        $('#nodes').append(node.div)
    }
</script>
</div>
{% endblock %}
